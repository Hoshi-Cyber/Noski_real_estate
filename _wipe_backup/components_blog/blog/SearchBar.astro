---
const { placeholder = 'Search postsâ€¦', value = '' } = Astro.props as { placeholder?: string; value?: string };
---
<div class="relative w-full max-w-xl">
  <input
    id="blog-search"
    type="search"
    placeholder={placeholder}
    value={value}
    class="w-full rounded-md ring-1 ring-neutral-300 px-3 py-2 text-sm"
    aria-label="Search blog"
  />
</div>

<script type="module" client:load>
  const el = document.getElementById('blog-search');
  let t;
  el?.addEventListener('input', () => {
    clearTimeout(t);
    t = setTimeout(() => {
      el.dispatchEvent(new CustomEvent('search', { bubbles: true, detail: { query: el.value } }));
    }, 250); // debounce
  });
</script>
