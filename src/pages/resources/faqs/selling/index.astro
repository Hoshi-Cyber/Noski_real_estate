---
// src/pages/resources/faqs/short-stay/index.astro
import MainLayout from '../../../../layouts/MainLayout.astro';
import Breadcrumbs from '../../../../components/resources/Breadcrumbs.astro';

const title = 'Short-Stay FAQs | Severino Realty';
const description = 'Common questions for short-stay guests and hosts.';
const guideUrl = '/short-stays';

const categories = [
  {
    name: 'Booking & Stay Terms',
    faqs: [
      { q:'Minimum stay length?', aHtml:'<p>Set per unit and season. Longer minimums reduce churn and cleaning load.</p>' },
      { q:'Maximum stay length?', aHtml:'<p>Typically 30–90 days for short-stay rentals. Longer requires tenancy terms.</p>' },
      { q:'Can I extend my stay?', aHtml:'<p>Yes, subject to availability and updated rate confirmation.</p>' },
      { q:'Cancellation policy?', aHtml:'<p>Choose flexible, standard, or strict. Align with channel partner policies.</p>' },
      { q:'Refund timeline if cancelled?', aHtml:'<p>Refunds are processed within 7–14 business days as per payment channel.</p>' }
    ]
  },
  {
    name: 'Rates & Payments',
    faqs: [
      { q:'What’s included in rates?', aHtml:'<p>Utilities, Wi-Fi, housekeeping cadence, and any disclosed fees.</p>' },
      { q:'Are taxes included?', aHtml:'<p>Local occupancy or VAT may apply; always shown at booking.</p>' },
      { q:'Deposit/holds?', aHtml:'<p>Security deposit or card pre-auth held until checkout inspection.</p>' },
      { q:'Extra fees to expect?', aHtml:'<p>Cleaning, parking, or pet fees if applicable, disclosed upfront.</p>' },
      { q:'Accepted payment methods?', aHtml:'<p>Bank card, mobile money, or transfer through approved platforms.</p>' }
    ]
  },
  {
    name: 'Check-in, Stay & Rules',
    faqs: [
      { q:'Check-in/out process?', aHtml:'<p>Provide access codes, ID match, and 24/7 contact for issues.</p>' },
      { q:'Early check-in or late checkout?', aHtml:'<p>Possible with prior approval and small fee subject to occupancy.</p>' },
      { q:'House rules?', aHtml:'<p>Guest limits, smoking, events, pets, quiet hours, and damage policy.</p>' },
      { q:'Are parties or events allowed?', aHtml:'<p>No, unless specifically authorized. Violations risk eviction.</p>' },
      { q:'Pet policy?', aHtml:'<p>Varies by unit. Fees, deposits, and cleaning rules disclosed in advance.</p>' }
    ]
  },
  {
    name: 'Amenities & Services',
    faqs: [
      { q:'Is cleaning included?', aHtml:'<p>Light cleaning may be included. Deep cleans charged separately.</p>' },
      { q:'Do units include kitchen use?', aHtml:'<p>Yes, unless studio/hotel-style units. Equipment varies by property.</p>' },
      { q:'Laundry facilities available?', aHtml:'<p>Either in-unit washer/dryer or shared building laundry.</p>' },
      { q:'Is parking provided?', aHtml:'<p>Yes where available. May be free, reserved, or paid separately.</p>' },
      { q:'Do you provide toiletries or starter kits?', aHtml:'<p>Basic supplies like soap, tissue, and water are provided initially.</p>' }
    ]
  },
  {
    name: 'Safety, Support & Compliance',
    faqs: [
      { q:'Emergency contact during stay?', aHtml:'<p>24/7 hotline number is provided pre-arrival.</p>' },
      { q:'What security measures exist?', aHtml:'<p>Locks, CCTV, controlled access, and onsite staff where applicable.</p>' },
      { q:'Insurance coverage?', aHtml:'<p>Property insured for structure. Guests cover personal items.</p>' },
      { q:'What happens in case of damage?', aHtml:'<p>Documented at checkout. Repair costs deducted from deposit/hold.</p>' },
      { q:'Is ID required at check-in?', aHtml:'<p>Yes, to comply with local regulations and security protocols.</p>' }
    ]
  }
];

// Flatten for JSON-LD
const allFaqs = categories.flatMap(c => c.faqs);
const ld = {
  '@context': 'https://schema.org',
  '@type': 'FAQPage',
  mainEntity: allFaqs.map(f => ({
    '@type': 'Question',
    name: f.q,
    acceptedAnswer: { '@type': 'Answer', text: f.aHtml.replace(/<[^>]*>/g, '') }
  })),
};
---

<MainLayout {title} {description}>
  <section class="section container">
    <Breadcrumbs
      items={[
        { label: 'Home', href: '/' },
        { label: 'Resources', href: '/resources' },
        { label: 'FAQs', href: '/resources/faqs' },
        { label: 'Short-Stay FAQs' }
      ]}
      class="mb-6"
    />

    <header class="mb-6 md:mb-8">
      <h1 class="text-2xl md:text-3xl font-bold text-primary">Short-Stay FAQs</h1>
      <div class="mt-3">
        <a href={guideUrl} class="btn-cta text-sm">View Short-Stays</a>
      </div>
    </header>

    <div class="grid md:grid-cols-2 xl:grid-cols-3 gap-6">
      {categories.map(cat => (
        <div class="space-y-4">
          <h2 class="text-lg font-semibold text-accent">{cat.name}</h2>
          <div class="divide-y divide-neutral-200 rounded-md ring-1 ring-neutral-200 bg-white">
            {cat.faqs.map(f => (
              <details class="group">
                <summary class="list-none cursor-pointer px-4 py-3 flex items-center justify-between">
                  <span class="font-medium text-primary">{f.q}</span>
                  <svg class="w-4 h-4 transition-transform group-open:rotate-180" viewBox="0 0 24 24" fill="none" stroke="currentColor" aria-hidden="true">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
                  </svg>
                </summary>
                <div class="px-4 pb-4 text-neutral-700 prose max-w-none" set:html={f.aHtml}></div>
              </details>
            ))}
          </div>
        </div>
      ))}
    </div>

    <script type="application/ld+json">{JSON.stringify(ld)}</script>
  </section>

  <!-- Page-wide single-open enforcement -->
  <script type="module" client:load>
    document.addEventListener(
      'toggle',
      (e) => {
        const el = e.target;
        if (!(el instanceof HTMLDetailsElement) || !el.open) return;
        document.querySelectorAll('details[open]').forEach((d) => {
          if (d !== el) d.removeAttribute('open');
        });
      },
      true
    );
  </script>
</MainLayout>
