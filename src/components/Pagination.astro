---
export interface Props {
  current: number;
  total: number;
  baseUrl: string;
}

const { current, total, baseUrl } = Astro.props;

function buildHref(page: number) {
  return page === 1 ? baseUrl : `${baseUrl}?page=${page}`;
}
---

{total > 1 && (
  <nav aria-label="Pagination" class="mt-8 flex items-center justify-center gap-2">
    <!-- Prev -->
    <a
      href={buildHref(Math.max(1, current - 1))}
      class={`px-3 py-1 border rounded ${current === 1 ? 'opacity-50 pointer-events-none' : 'hover:bg-gray-100'}`}
      aria-disabled={current === 1}
    >
      Prev
    </a>

    <!-- Page Numbers -->
    {Array.from({ length: total }).map((_, i) => {
      const page = i + 1;
      const isActive = page === current;
      return (
        <a
          href={buildHref(page)}
          class={`px-3 py-1 border rounded ${
            isActive ? 'bg-primary text-white font-semibold' : 'hover:bg-gray-100'
          }`}
          aria-current={isActive ? 'page' : undefined}
        >
          {page}
        </a>
      );
    })}

    <!-- Next -->
    <a
      href={buildHref(Math.min(total, current + 1))}
      class={`px-3 py-1 border rounded ${current === total ? 'opacity-50 pointer-events-none' : 'hover:bg-gray-100'}`}
      aria-disabled={current === total}
    >
      Next
    </a>
  </nav>
)}
