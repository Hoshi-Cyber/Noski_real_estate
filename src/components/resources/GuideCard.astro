---
import BaseCard from '../BaseCard.astro';

export interface Props {
  guide: {
    title: string;
    summary?: string;
    heroImage?: string;
    slug?: string;
    pubDate?: string | Date;
    highlight?: boolean;
  };
}

const { guide } = Astro.props;

// Normalize props and align paths with resources section
const href = guide?.slug ? `/resources/guides/${guide.slug}` : `/resources/guides`;
const img = guide?.heroImage ?? '/images/placeholder.webp';
const date = guide?.pubDate
  ? new Date(guide.pubDate).toLocaleDateString('en-US', {
      year: 'numeric',
      month: 'short',
      day: 'numeric',
    })
  : '';
---

<BaseCard
  title={guide.title}
  desc={guide.summary}
  img={img}
  href={href}
  date={date}
  tag="Guide"
  cta="Read guide â†’"
  variant="visual"
  showImage={true}
  highlight={guide?.highlight ?? false}
/>
