---
/** Guide detail: hero + sticky in-page nav + numbered steps + optional checklist CTA */
const {
  title,
  summary = '',
  estReadMin = 8,
  checklistUrl = '',
  steps = /** [{ id, heading, bodyHtml }] */ []
} = Astro.props;
---

<section class="max-w-7xl mx-auto px-4 py-8 md:py-10">
  <!-- Hero -->
  <header class="mb-6 md:mb-10">
    <h1 class="text-2xl md:text-3xl font-bold text-primary">{title}</h1>
    {summary && <p class="mt-2 text-neutral-700">{summary}</p>}
    <p class="mt-1 text-sm text-neutral-500">Estimated read: {estReadMin} min</p>
  </header>

  <div class="grid grid-cols-1 lg:grid-cols-[240px_1fr] gap-8">
    <!-- In-page nav -->
    <nav 
      class="lg:sticky lg:top-20 lg:self-start rounded-md ring-1 ring-neutral-200 bg-white p-4 text-sm shadow-sm"
      aria-label="On this page"
    >
      <h2 class="font-semibold text-primary mb-3">Steps</h2>
      <ul class="space-y-2">
        {steps.map((s, i) => (
          <li>
            <a 
              href={`#${s.id}`} 
              class="block hover:underline hover:text-[color:var(--color-cta)] transition"
            >
              Step {i+1}: {s.heading}
            </a>
          </li>
        ))}
      </ul>

      {checklistUrl && (
        <a 
          href={checklistUrl} 
          class="mt-5 inline-block w-full text-center rounded-md px-3 py-2 bg-[color:var(--color-cta)] text-white text-sm font-medium shadow hover:opacity-90 transition"
        >
          Download Checklist
        </a>
      )}
    </nav>

    <!-- Steps -->
    <article class="space-y-10">
      {steps.map((s, i) => (
        <section id={s.id} class="scroll-mt-24">
          <h2 class="text-xl font-semibold text-primary mb-2">
            Step {i+1}: {s.heading}
          </h2>
          <div 
            class="prose max-w-none prose-p:my-3 prose-li:my-1 text-neutral-700" 
            set:html={s.bodyHtml}
          ></div>
        </section>
      ))}
    </article>
  </div>
</section>
