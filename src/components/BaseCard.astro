---
export interface Props {
  title: string;
  desc?: string;
  img?: string;
  href: string;
  date?: string;
  tag?: string;
  cta?: string;
  variant?: 'visual' | 'compact' | 'horizontal';
  showImage?: boolean;
  highlight?: boolean; // featured styling
}

const {
  title,
  desc,
  img = '/images/placeholder.webp',
  href,
  date,
  tag,
  cta = 'Read more â†’',
  variant = 'visual',
  showImage = true,
  highlight = false,
} = Astro.props;
---

<a 
  href={href} 
  class="block group focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[color:var(--color-cta)] rounded-xl"
>
  <article
    class={`rounded-xl border bg-white overflow-hidden transition-all duration-300 shadow-sm hover:shadow-lg hover:-translate-y-1
      ${variant === 'horizontal' ? 'flex flex-row' : 'flex flex-col'}
      ${highlight 
        ? 'border-[color:var(--color-cta)] ring-2 ring-[color:var(--color-cta)] bg-[color:var(--color-cta)/0.05]' 
        : 'border-neutral-200'
      }
    `}
  >
    {showImage && (
      <img
        src={img}
        alt={title}
        loading="lazy"
        decoding="async"
        class={`object-cover flex-shrink-0 transition-transform duration-300 group-hover:scale-105
          ${variant === 'horizontal' ? 'w-40 h-40' : 'h-48 w-full'}
        `}
      />
    )}

    <div class="p-4 flex flex-col justify-between flex-1">
      {(tag || date) && (
        <div class="text-xs text-neutral-500 mb-2 flex flex-wrap gap-2">
          {tag && <span class="px-2 py-0.5 rounded bg-neutral-100 text-neutral-600">{tag}</span>}
          {date && <span>{date}</span>}
        </div>
      )}

      <h3 class="font-semibold text-neutral-900 group-hover:text-[color:var(--color-primary)] transition line-clamp-2">
        {title}
      </h3>

      {desc && (
        <p class="mt-2 text-sm text-neutral-600 line-clamp-3">{desc}</p>
      )}

      {cta && (
        <span class="mt-3 inline-flex items-center text-sm font-medium text-[color:var(--color-cta)] group-hover:underline">
          {cta}
        </span>
      )}
    </div>
  </article>
</a>
