@tailwind base;
@tailwind components;
@tailwind utilities;

/* ---- Base Tokens ---- */
:root {
  /* Brand */
  --color-primary: #0A2540;              /* Deep Navy */
  --color-primary-90: rgb(10 37 64 / .9);
  --color-primary-active: rgb(10 37 64 / .8);

  --color-accent: #F59E0B;               /* Amber highlight */

  --color-cta: #2563EB;                  /* CTA Blue */
  --color-cta-90: rgb(37 99 235 / .9);
  --color-cta-active: rgb(37 99 235 / .8);

  /* Neutrals */
  --color-neutral-50: #FAFAFA;
  --color-neutral-100: #F3F4F6;
  --color-neutral-200: #E5E7EB;
  --color-neutral-300: #D1D5DB;
  --color-neutral-500: #6B7280;
  --color-neutral-600: #4B5563;
  --color-neutral-800: #1F2937;

  /* Typography */
  --font-sans: "Inter", system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
  --font-serif: "Merriweather", Georgia, serif;
  --font-mono: "Fira Code", monospace;

  /* Accent palette for pills */
  --emerald: #10B981;
  --purple:  #7C3AED;
  --slate:   #334155;

  /* Spacing */
  --space-section: 4rem;

  /* Breakpoints */
  --bp-xs: 320px;
  --bp-sm: 640px;
  --bp-md: 768px;
  --bp-lg: 1024px;
  --bp-xl: 1280px;
  --bp-2xl: 1536px;
}

/* ---- Base Styles ---- */
body {
  @apply font-sans text-neutral-800 bg-white antialiased;
  font-family: var(--font-sans);
}

h1, h2, h3, h4, h5, h6 {
  @apply font-bold tracking-tight;
  color: var(--color-primary);
}

a {
  @apply transition-colors underline-offset-2;
  color: var(--color-primary);
}
a:hover   { color: var(--color-primary-90); }
a:active  { color: var(--color-primary-active); }
a:focus-visible { outline: 2px solid var(--color-primary); outline-offset: 2px; }
a:disabled {
  color: var(--color-neutral-500);
  pointer-events: none;
}

/* ---- Utilities ---- */
@layer utilities {
  .text-primary   { color: var(--color-primary); }
  .text-accent    { color: var(--color-accent); }
  .text-cta       { color: var(--color-cta); }

  .bg-primary     { background-color: var(--color-primary); }
  .bg-primary-90  { background-color: var(--color-primary-90); }
  .bg-primary-act { background-color: var(--color-primary-active); }
  .bg-accent      { background-color: var(--color-accent); }
  .bg-cta         { background-color: var(--color-cta); }
  .bg-cta-90      { background-color: var(--color-cta-90); }
  .bg-cta-act     { background-color: var(--color-cta-active); }

  .border-primary { border-color: var(--color-primary); }
  .border-accent  { border-color: var(--color-accent); }
  .border-cta     { border-color: var(--color-cta); }

  /* Section spacing */
  .section { @apply py-16 px-4 sm:px-6 lg:px-8; }

  /* Responsive container */
  .container { @apply max-w-7xl mx-auto; }

  /* Surface utilities to match header styling */
  .surface          { @apply bg-white ring-1 ring-neutral-200; }
  .surface-muted    { @apply bg-neutral-50 ring-1 ring-neutral-200; }
  .surface-translucent { background-color: rgb(255 255 255 / .9); -webkit-backdrop-filter: blur(8px); backdrop-filter: blur(8px); }

  /* Subtle fact label text (used beside price) */
  .fact-label { @apply text-sm text-neutral-700; }

  /* Single-line ellipsis */
  .truncate-1 { @apply truncate; }
}

/* ---- Components ---- */
@layer components {
  /* ---- Buttons ---- */
  .btn {
    @apply inline-flex items-center justify-center px-6 py-3 rounded-md font-medium transition shadow-sm
           disabled:opacity-50 disabled:cursor-not-allowed;
  }

  .btn-primary {
    @apply text-white;
    background-color: var(--color-primary);
  }
  .btn-primary:hover   { background-color: var(--color-primary-90); }
  .btn-primary:active  { background-color: var(--color-primary-active); }
  .btn-primary:focus-visible { outline: 2px solid var(--color-primary); outline-offset: 2px; }
  .btn-primary:disabled{ background-color: var(--color-neutral-300); }

  /* Primary CTA uses --color-cta */
  .btn-cta {
    @apply inline-flex items-center justify-center px-6 py-3 rounded-md font-semibold text-white transition shadow-sm;
    background-color: var(--color-cta);
  }
  .btn-cta:hover   { background-color: var(--color-cta-90); }
  .btn-cta:active  { background-color: var(--color-cta-active); }
  .btn-cta:focus-visible { outline: 2px solid var(--color-cta); outline-offset: 2px; }
  .btn-cta:disabled{ background-color: var(--color-neutral-300); }

  /* Secondary CTA uses --color-accent */
  .btn-outline {
    @apply inline-flex items-center justify-center px-5 py-2.5 rounded-md font-medium transition;
    border: 1px solid var(--color-accent);
    color: var(--color-accent);
    background-color: transparent;
  }
  .btn-outline:hover   { background-color: color-mix(in srgb, var(--color-accent) 10%, transparent); }
  .btn-outline:active  { background-color: color-mix(in srgb, var(--color-accent) 18%, transparent); }
  .btn-outline:focus-visible { outline: 2px solid var(--color-accent); outline-offset: 2px; }
  .btn-outline:disabled{ color: var(--color-neutral-500); border-color: var(--color-neutral-300); }

  /* WhatsApp CTA (text button) */
  .btn-wa{
    @apply inline-flex items-center justify-center rounded-md px-4 py-2 font-semibold text-white transition;
    background:#25D366;
  }
  .btn-wa:hover{ background:#1fb257; }
  .btn-wa:focus-visible{ outline:2px solid #25D366; outline-offset:2px; }
  .btn-wa svg{ width:16px; height:16px; display:block; }

  /* Icon button (40Ã—40 circular) */
  .icon-btn{
    @apply inline-flex items-center justify-center w-10 h-10 rounded-full bg-white text-neutral-700 shadow ring-1 ring-neutral-200;
  }
  .icon-btn:focus-visible{ @apply outline-none ring-2 ring-cta; }

  /* WhatsApp icon button */
  .btn-wa-icon{
    @apply icon-btn text-white;
    background:#25D366;
  }
  .btn-wa-icon:hover{ background:#1fb257; }
  .btn-wa-icon:focus-visible{ outline:2px solid #25D366; outline-offset:2px; }

  /* Unified carousel buttons */
  .carousel-btn {
    @apply inline-flex items-center justify-center rounded-md px-3 py-2 text-white
           focus:outline-none transition;
    background-color: rgb(0 0 0 / .45);
  }
  .carousel-btn:hover { background-color: rgb(0 0 0 / .6); }
  .carousel-btn:focus-visible { outline: 2px solid var(--color-cta); outline-offset: 2px; }

  /* ---- Badges ---- */
  .badge{
    @apply inline-flex items-center gap-1 px-2.5 py-1 rounded-full text-[11px] font-medium
           ring-1 ring-neutral-200 bg-neutral-50 text-neutral-700;
  }
  .badge-cta{
    @apply inline-flex items-center gap-1 px-2.5 py-1 rounded-full text-[11px] font-semibold;
    color: var(--color-cta);
    background-color: color-mix(in srgb, var(--color-cta) 12%, transparent);
    box-shadow: inset 0 0 0 1px color-mix(in srgb, var(--color-cta) 30%, transparent);
  }
  .badge-warn{
    @apply inline-flex items-center gap-1 px-2.5 py-1 rounded-full text-[11px] font-semibold;
    color: var(--color-accent);
    background-color: color-mix(in srgb, var(--color-accent) 14%, transparent);
    box-shadow: inset 0 0 0 1px color-mix(in srgb, var(--color-accent) 35%, transparent);
  }

  /* ---- Pills (legacy; use bullets for amenities now) ---- */
  .pill {
    @apply inline-flex items-center gap-2 px-3 py-1 rounded-full text-xs font-medium select-none;
    background: var(--color-neutral-100);
    color: var(--color-neutral-800);
    box-shadow: inset 0 0 0 1px var(--color-neutral-200);
  }
  .pill-dot { @apply w-1.5 h-1.5 rounded-full; background: var(--color-cta); }
  .pill-blue {
    color: var(--color-cta);
    background-color: color-mix(in srgb, var(--color-cta) 12%, transparent);
    box-shadow: inset 0 0 0 1px color-mix(in srgb, var(--color-cta) 28%, transparent);
  }
  .pill-amber {
    color: var(--color-accent);
    background-color: color-mix(in srgb, var(--color-accent) 14%, transparent);
    box-shadow: inset 0 0 0 1px color-mix(in srgb, var(--color-accent) 32%, transparent);
  }
  .pill-emerald {
    color: var(--emerald);
    background-color: color-mix(in srgb, var(--emerald) 14%, transparent);
    box-shadow: inset 0 0 0 1px color-mix(in srgb, var(--emerald) 32%, transparent);
  }
  .pill-purple {
    color: var(--purple);
    background-color: color-mix(in srgb, var(--purple) 14%, transparent);
    box-shadow: inset 0 0 0 1px color-mix(in srgb, var(--purple) 32%, transparent);
  }
  .pill-slate {
    color: var(--slate);
    background-color: color-mix(in srgb, var(--slate) 12%, transparent);
    box-shadow: inset 0 0 0 1px color-mix(in srgb, var(--slate) 30%, transparent);
  }

  /* ---- Cards ---- */
  .card           { @apply bg-white rounded-xl shadow ring-1 ring-neutral-200 hover:shadow-md transition; }
  .card-tight     { @apply bg-white rounded-lg shadow p-4 ring-1 ring-neutral-200; }
  .card-highlight { @apply border-2 border-cta ring-1 ring-cta; }

  .card-horizontal img { @apply w-40 h-40 object-cover; }
  .card-horizontal .content { @apply flex flex-col justify-between p-4 flex-1; }

  /* ---- Breadcrumbs ---- */
  .breadcrumb { @apply max-w-6xl mx-auto px-4 py-3 text-sm md:text-[15px]; }
  .breadcrumb-ol {
    @apply flex items-center gap-1.5 flex-wrap rounded-md bg-neutral-50 ring-1 ring-neutral-200 px-3 py-2;
    overflow-x: auto;
    -ms-overflow-style: none;
    scrollbar-width: none;
  }
  .breadcrumb-ol::-webkit-scrollbar { display: none; }
  .breadcrumb a { @apply text-primary font-normal no-underline hover:text-cta; }
  .breadcrumb-sep { @apply text-neutral-400 px-1; }
  .breadcrumb-current { @apply text-neutral-700 font-normal; }

  /* ---- Bulleted grids (for Amenities / Neighborhood) ---- */
  .bullets { @apply grid gap-y-1 gap-x-8 list-disc pl-5; }
  .bullets-2 { @apply md:grid-cols-2; }
  .bullets-3 { @apply md:grid-cols-2 lg:grid-cols-3; }

  /* ---- Category Tile ---- */
  .category-tile {
    @apply relative flex flex-col items-start p-6 rounded-2xl bg-white shadow-sm
           ring-1 ring-neutral-200 transition hover:shadow-md hover:-translate-y-0.5
           focus-visible:outline-2 focus-visible:outline-cta;
    background-image: linear-gradient(180deg, rgba(10,37,64,.02), rgba(10,37,64,0));
  }
  .tile-accent::after{
    content:"";
    @apply absolute inset-x-6 top-[56px] h-px bg-neutral-200;
  }
  .tile-icon  { @apply w-10 h-10 rounded-lg bg-neutral-100 flex items-center justify-center text-primary mb-4; }
  .tile-title { @apply text-lg font-semibold text-primary; }
  .tile-sub   { @apply text-sm text-neutral-600 mt-1; }

  .tile-hover { @apply hover:-translate-y-0.5 hover:shadow-md transition; }
  .tile-badge {
    @apply w-10 h-10 rounded-lg bg-neutral-100 flex items-center justify-center text-primary mb-4 ring-1 ring-neutral-200;
  }
  .tile-icon-svg { width: 20px; height: 20px; display: block; }
  .category-tile:hover .tile-badge { @apply bg-cta text-white ring-cta; }

  /* ---- Area Card ---- */
  .area-card {
    @apply shrink-0 snap-start basis-2/3 sm:basis-1/3 md:basis-1/4 lg:basis-1/5
           p-4 rounded-lg bg-white shadow-sm hover:shadow-md text-center transition ring-1 ring-neutral-200;
  }
  .area-card span { @apply font-semibold text-neutral-700; }
  .area-card:focus-visible { outline: 2px solid var(--color-cta); outline-offset: 2px; }

  /* ---- Chip links ---- */
  .chip-link {
    @apply shrink-0 snap-start px-4 py-2 rounded-full border border-neutral-300 text-sm
           text-neutral-700 hover:bg-neutral-100 transition whitespace-nowrap;
  }

  /* ---- TOC ---- */
  .toc-card { @apply rounded-2xl ring-1 ring-neutral-200 bg-white p-4 text-sm shadow-sm lg:sticky lg:top-20; }
  .toc-list a { @apply block rounded px-2 py-1 hover:underline hover:text-cta transition focus:outline-none focus:ring-2 focus:ring-cta; }

  /* ---- PDF Badge ---- */
  .pdf-badge {
    @apply inline-flex items-center gap-1 px-2 py-0.5 text-xs font-semibold rounded-full bg-red-50 text-red-700 border border-red-200;
  }

  /* ---- Related Guides ---- */
  .related-card { @apply post-card; }

  /* ---- Why Choose Us ---- */
  .why-card {
    @apply flex flex-col items-center justify-center p-8 bg-white rounded-xl shadow-sm 
           hover:shadow-md transition cursor-default ring-1 ring-neutral-200;
  }
  .why-icon { @apply w-12 h-12 text-primary mb-3 transition-transform; }
  .why-label { @apply font-semibold text-neutral-700 text-sm sm:text-base; }
  .why-card:hover .why-icon { @apply text-cta scale-110; }
  .why-card:focus-visible { @apply outline-none; outline: 2px solid var(--color-cta); outline-offset: 2px; }

  /* ---- Testimonials ---- */
  .testimonial { @apply p-6 bg-white rounded-lg shadow hover:shadow-md transition text-neutral-600 ring-1 ring-neutral-200; }
  .testimonial p { @apply italic; }
  .testimonial .author { @apply mt-4 font-semibold text-primary; }
  .testimonial .role   { @apply text-sm text-neutral-500; }
  .testimonial:focus-visible { @apply outline-none; outline: 2px solid var(--color-cta); outline-offset: 2px; }

  /* ---- Section headers ---- */
  .section-title { @apply text-2xl md:text-3xl font-bold text-primary mb-8 text-center; }
  .section-subtitle { @apply text-sm font-semibold text-neutral-700 uppercase tracking-wide; }

  /* ---- Popular Articles ---- */
  .post-card  { @apply bg-white rounded-2xl shadow ring-1 ring-neutral-200 overflow-hidden hover:shadow-md transition; }
  .post-media { @apply w-full h-44 object-cover; }
  .post-body  { @apply p-4; }
  .post-title { @apply font-semibold leading-snug text-primary; }
  .post-desc  { @apply text-sm text-neutral-600 mt-1; }
  .post-meta  { @apply mt-3 text-sm text-neutral-500 flex items-center justify-between; }

  /* ---- Dialog / Sheet ---- */
  .sheet{
    @apply bg-white rounded-xl shadow-xl ring-1 ring-neutral-200 max-h-[85vh] overflow-auto;
  }
  .sheet--mobile{
    @apply fixed inset-x-0 bottom-0 rounded-t-2xl shadow-xl ring-1 ring-neutral-200 bg-white max-h-[85vh] overflow-auto;
  }
  .sheet__header{
    @apply sticky top-0 z-10 bg-white px-4 py-3 border-b flex items-center justify-between;
  }
  .sheet__body{ @apply p-4; }
  .sheet__footer--sticky{ @apply sticky bottom-0 bg-white p-3 border-t; }

  /* ---- Popover ---- */
  .popover{
    @apply absolute mt-2 min-w-[12rem] bg-white ring-1 ring-neutral-200 rounded-md shadow-lg p-2 z-20;
  }
  .popover-arrow{
    position:absolute; width:10px; height:10px; transform:rotate(45deg);
    background:#fff; border-left:1px solid rgb(229 231 235); border-top:1px solid rgb(229 231 235);
    top:-5px; left:16px;
  }

  /* ---- Share bars ---- */
  .share-bar{ @apply mt-4 flex items-center gap-2 flex-wrap; }
  .share-label{ @apply text-sm text-neutral-700 mr-1; }
  .share-btn{
    appearance:none; -webkit-appearance:none;
    @apply inline-flex items-center gap-2 px-2.5 py-2 rounded-md border border-neutral-300 bg-white text-neutral-800 text-sm transition;
    text-decoration: none;
  }
  .share-btn:hover{ @apply bg-neutral-100 border-neutral-400; }
  .share-btn:focus{ outline:2px solid var(--color-cta); outline-offset:2px; }
  .share-btn svg{ width:16px; height:16px; display:block; }

  /* Icon-only variant (optional helper) */
  .share-btn-icon{ @apply w-9 h-9 p-0 justify-center; }
}

/* Field validation */
input:invalid, select:invalid, textarea:invalid { @apply border-red-400; }

/* ---- Footer (on-dark) link overrides ---- */
footer.bg-primary a:not(.btn-cta):not(.btn-outline) {
  color: var(--color-neutral-100);
}
footer.bg-primary a:not(.btn-cta):not(.btn-outline):hover {
  color: var(--color-accent);
}
footer.bg-primary a:focus-visible {
  outline: 2px solid var(--color-cta);
  outline-offset: 2px;
}

/* ---- Footer (on-dark) heading overrides ---- */
footer.bg-primary h1,
footer.bg-primary h2,
footer.bg-primary h3,
footer.bg-primary h4,
footer.bg-primary h5,
footer.bg-primary h6 {
  color: var(--color-neutral-100);
}

/* ---- Responsive Adjustments ---- */
@media (max-width: 480px) {
  .section-title { @apply text-xl; }
  .btn           { @apply px-4 py-2 text-sm; }
  .category-tile { @apply p-4; }
  .tile-icon     { @apply w-9 h-9 mb-3; }
  .why-card      { @apply p-6; }
  .why-icon      { @apply w-10 h-10; }
}

/* Very small screens: compact share bar */
@media (max-width: 380px) {
  .share-bar .share-label{ display:none; }
  .share-bar .share-btn{ padding: .375rem .5rem; }
}

/* ---- In-article link decoration ---- */
.link-decor {
  text-decoration: none;
  border-bottom: 1px dotted currentColor;
  padding-bottom: 1px;
  transition: border-color .15s ease, color .15s ease;
}
.link-decor:hover { border-bottom-style: solid; }
.link-decor:focus-visible { outline: 2px solid var(--color-cta); outline-offset: 2px; }

/* Safe-area padding for sticky bars */
.safe-bottom { padding-bottom: env(safe-area-inset-bottom); }
